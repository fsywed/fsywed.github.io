<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ¬¢è¿è®¿é—®</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Arial;background:linear-gradient(135deg,#1a2a6c,#b21f1f,#fdbb2d);color:white;min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px}
.container{background:rgba(255,255,255,0.15);padding:40px;border-radius:20px;text-align:center;max-width:500px;width:90%;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.2)}
.emoji{font-size:4em;margin:15px 0}
.btn{background:linear-gradient(45deg,#FF416C,#FF4B2B);color:white;border:none;padding:15px 30px;font-size:1.1em;border-radius:50px;cursor:pointer;margin:10px;width:calc(100% - 20px);font-weight:bold;transition:transform 0.2s}
.btn:hover{transform:scale(1.05)}
.btn-secondary{background:rgba(255,255,255,0.2);border:1px solid rgba(255,255,255,0.3)}
input,textarea{width:100%;padding:12px;margin:10px 0;border:none;border-radius:8px;font-size:16px;background:rgba(255,255,255,0.9)}
textarea{height:80px;resize:vertical}
.loading{display:none;margin:10px 0;color:rgba(255,255,255,0.8)}
</style>
</head>
<body>
<div class="container">
<div class="emoji">ğŸ‘‹</div>
<h1>æ¬¢è¿è®¿é—®ï¼</h1>
<p>åœ¨å¼€å§‹æ¸¸æˆå‰è¯·å…ˆç™»è®°</p>
<div style="margin:25px 0">
<input type="text" id="visitorName" placeholder="ä½ çš„åå­—ï¼ˆå¯é€‰ï¼‰">
<textarea id="visitorNote" placeholder="ç•™è¨€ï¼ˆå¯é€‰ï¼‰"></textarea>
<div class="loading" id="loadingIndicator">ğŸš€ æäº¤ä¸­ï¼Œè¯·ç¨å€™...</div>
<button class="btn" onclick="registerAndRedirect()" id="submitBtn">ğŸš€ ç™»è®°å¹¶å¼€å§‹æ¸¸æˆ</button>
<button class="btn btn-secondary" onclick="skipToGame()">â© è·³è¿‡ç›´æ¥æ¸¸æˆ</button>
</div>
</div>
<script>
async function sendToCloud(data){
try{
const response=await fetch('https://fsywed-github-lo-ylkz.vercel.app/api/save-message',{
method:'POST',headers:{'Content-Type':'application/json'},
body:JSON.stringify({
name:data.userName||'ç³»ç»Ÿè®°å½•',
message:data.userNote||`åŠ¨ä½œ:${data.action}`,
timestamp:data.timestamp,
action:data.action,
screenSize:`${screen.width}x${screen.height}`,
timezone:Intl.DateTimeFormat().resolvedOptions().timeZone
})
});
if(response.ok){const result=await response.json();console.log('âœ… äº‘ç«¯è®°å½•æˆåŠŸ:',result);return true;}
else{console.log('âš ï¸ äº‘ç«¯è®°å½•å¤±è´¥');return false;}
}catch(error){console.log('ğŸŒ ç½‘ç»œé”™è¯¯:',error);return false;}
}
async function recordVisit(action,data={}){
const visitData={
action:action,
timestamp:new Date().toISOString(),
userName:data.userName,
userNote:data.userNote,
...data
};
await sendToCloud(visitData);
}
window.addEventListener('load',()=>recordVisit('homepage_visit'));
async function registerAndRedirect(){
const name=document.getElementById('visitorName').value.trim();
const note=document.getElementById('visitorNote').value.trim();
const userName=name||'åŒ¿åç”¨æˆ·';
const userNote=note||'æ— ç•™è¨€';
showLoading(true);
try{
await recordVisit('user_registration',{userName:userName,userNote:userNote,hasName:!!name,hasNote:!!note});
setTimeout(()=>window.location.href='game.html',500);
}catch(error){
console.error('ç™»è®°å¤±è´¥:',error);
showLoading(false);
alert('ç™»è®°å¤±è´¥ï¼Œä½†æ‚¨ä»ç„¶å¯ä»¥ç»§ç»­æ¸¸æˆ');
window.location.href='game.html';
}
}
function skipToGame(){
recordVisit('skip_registration',{userName:'åŒ¿åè·³è¿‡ç”¨æˆ·',userNote:'ç”¨æˆ·é€‰æ‹©è·³è¿‡ç™»è®°',isSkipped:true});
window.location.href='game.html';
}
function showLoading(show){
const loading=document.getElementById('loadingIndicator');
const submitBtn=document.getElementById('submitBtn');
loading.style.display=show?'block':'none';
submitBtn.disabled=show;
submitBtn.textContent=show?'æäº¤ä¸­...':'ğŸš€ ç™»è®°å¹¶å¼€å§‹æ¸¸æˆ';
submitBtn.style.opacity=show?'0.7':'1';
}
document.addEventListener('keypress',(e)=>e.key==='Enter'&&registerAndRedirect());
window.addEventListener('load',()=>document.getElementById('visitorName').focus());
</script>
</body>
</html>